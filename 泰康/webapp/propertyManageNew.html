<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>18物品出入管理-新建</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <script src="js/rem.js"></script>
    <link rel="stylesheet" href="style/layout.css">
    <link rel="stylesheet" href="style/mobiscroll.css">
    <style>
        .dw-persp {
            position: fixed;
            height: 100% !important;
        }

        .dw.dwbg {
            position: absolute;
            top: 50% !important;
            transform: translate(0, -50%);
        }

        .android-ics .dwv {
            color: #ff6405;
            border-color: #ff6405;
        }

        .dwl {
            color: #ff6405;
        }

        .android-ics .dw .dwwol {
            border-color: #ff6405;
        }
    </style>
</head>
<body>
<div class="tk_pMN">
    <!--<header class="tk_compHeader">
        <div class="tk_compHBack"></div>
        <h3 class="tk_compHTitle">新建物品出入管理</h3>
        <div class="tk_compHMore"></div>
    </header>-->
    <ul class="tk_pMLMenu">
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">申请部门</span>
            <span class="tk_compItemD">行政部</span>
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">申请人</span>
            <span class="tk_compItemD">张三</span>
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">所在楼栋</span>
            <div class="tk_compItemC">
                <span class="tk_compItemCTxt">请选择</span>
                <div class="tk_compItCIcon"></div>
                <!--<input class="tk_pMDItemDIptD" type="text">-->
            </div>
            <div class="tk_compPopUp2Wrapper none">
                <div class="tk_compPopUp2">
                    <div class="tk_compPopUp2Title">投诉类型选择</div>
                    <ul class="tk_compPopUp2Menu">
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">楼栋一</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型一">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">楼栋二</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型二">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">楼栋三</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型三">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">楼栋四</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型四">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">楼栋五</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型五">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型六</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型六">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型七</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型七">
                        </li>
                    </ul>
                    <div class="tk_compPopUp2BtnWrapper">
                        <div class="tk_compPopUp2Btn fl">确定</div>
                        <div class="tk_compPopUp2Btn fr">关闭</div>
                    </div>
                </div>
            </div>
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">物品类型</span>
            <div class="tk_compItemC">
                <span class="tk_compItemCTxt">请选择</span>
                <div class="tk_compItCIcon"></div>
                <!--<div class="tk_compItCIcon"></div>
                <input class="tk_pMDItemDIptT" type="text" placeholder="请选择">-->
            </div>
            <div class="tk_compPopUp2Wrapper none">
                <div class="tk_compPopUp2">
                    <div class="tk_compPopUp2Title">投诉类型选择</div>
                    <ul class="tk_compPopUp2Menu">
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型一</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型一">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型二</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型二">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型三</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型三">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型四</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型四">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型五</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型五">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型六</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型六">
                        </li>
                        <li class="tk_compPopUp2Item">
                            <label class="tk_compPopUp2ItName">类型七</label>
                            <input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型七">
                        </li>
                    </ul>
                    <div class="tk_compPopUp2BtnWrapper">
                        <div class="tk_compPopUp2Btn fl">确定</div>
                        <div class="tk_compPopUp2Btn fr">关闭</div>
                    </div>
                </div>
            </div>
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">申请人</span>
            <input class="tk_pMDItemDIpt" type="text" placeholder="请输入规格型号">
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">申请时间</span>
            <span class="tk_compItemD">2017-09-18</span>
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">计划出门时间</span>
            <div class="tk_compItemC">
                <!--<span class="tk_compItemCTxt">请选择</span>-->
                <input class="tk_compItemCTxtIpt" placeholder="请选择"/>
                <div class="tk_compItCIcon"></div>
                <!--<input class="tk_pMDItemDIptD" type="date">-->
            </div>

        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">物品数量</span>
            <input class="tk_pMDItemDIpt" type="text" placeholder="请输入物品数量">
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">物品单位</span>
            <input class="tk_pMDItemDIpt" type="text" placeholder="请输入物品单位">
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">出门原因</span>
            <input class="tk_pMDItemDIpt" type="text" placeholder="请简述出门原因">
        </li>
        <li class="tk_pMLItem clear">
            <span class="tk_compItemN">备注说明</span>
            <input class="tk_pMDItemDIpt" type="text" placeholder="如有备注请输入">
        </li>
    </ul>
    <section class="tk_pMNMenuWrapper">
        <ul class="tk_pMNMenu">
            <!--<li class="tk_compPopUp2Item">
                <label class="tk_compPopUp2ItName">类型一</label>
                <div class="tk_compPopUp2ItPM">
                    <button class="tk_compPopUp2ItMinus"></button>
                    <div class="tk_compPopUp2ItPMIptWrapper">
                        <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                        <div class="tk_compPopUp2ItPMIptVeil"></div>
                    </div>
                    <button class="tk_compPopUp2ItPlus"></button>
                </div>
            </li>
            <li class="tk_compPopUp2Item">
                <label class="tk_compPopUp2ItName">类型二</label>
                <div class="tk_compPopUp2ItPM">
                    <button class="tk_compPopUp2ItMinus"></button>
                    <div class="tk_compPopUp2ItPMIptWrapper">
                        <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                        <div class="tk_compPopUp2ItPMIptVeil"></div>
                    </div>
                    <button class="tk_compPopUp2ItPlus"></button>
                </div>
            </li>-->
        </ul>
        <div class="tk_pMNAddWrapper">
            <div class="tk_pMNAdd">
                <i class="tk_pMNAddIcon"></i>
                <span class="tk_pMNAddTxt">添加物品</span>
            </div>
        </div>
        <div class="tk_compPopUp2Wrapper none">
            <div class="tk_compPopUp2">
                <div class="tk_compPopUp2Title">出入物品选择</div>
                <ul class="tk_compPopUp2Menu">
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型一</label>
                        <!--<input class="tk_compPopUp2ItIpt" type="radio" name="type" value="类型一">-->
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型二</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型三</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型四</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型五</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型六</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                    <li class="tk_compPopUp2Item">
                        <label class="tk_compPopUp2ItName">类型七</label>
                        <div class="tk_compPopUp2ItPM">
                            <button class="tk_compPopUp2ItMinus"></button>
                            <div class="tk_compPopUp2ItPMIptWrapper">
                                <input class="tk_compPopUp2ItPMIpt" type="number" name="quantity" value="0">
                                <div class="tk_compPopUp2ItPMIptVeil"></div>
                            </div>
                            <button class="tk_compPopUp2ItPlus"></button>
                        </div>
                    </li>
                </ul>
                <div class="tk_compPopUp2BtnWrapper">
                    <div class="tk_compPopUp2Btn fl" id="confirmMaterial">确定</div>
                    <div class="tk_compPopUp2Btn fr">关闭</div>
                </div>
            </div>
        </div>
    </section>
    <section class="tk_RTopPicWrapper">
        <div class="tk_RTopPicTitle">发布照片</div>
        <ul class="tk_RTopPicMenu clear">
            <li class="tk_RTopPicItem">
                <div class="tk_RTopPicItDelete"></div>
            </li>
            <li class="tk_RTopPicItem tk_RTopPicItIpt">
                <div class="tk_RTopPicItIptIcon"></div>
                <div class="tk_RTopPicItIptTxt">上传照片</div>
                <input type="file" class="tk_RTopPicItIptInput" multiple>
            </li>
        </ul>
    </section>

    <section class="tk_pMLBtnWrapper clear">
        <button class="tk_pMLBtnNew">保存并提交</button>
        <button class="tk_pMLBtnDel">保存</button>
    </section>
</div>


<script type="text/javascript" src="js/jquery-3.2.1.js"></script>
<script>
    $(".tk_compPopUp2Menu").on("click",".tk_compPopUp2ItPlus",function () {
        var val = $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val();
        val++;
        $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val(val);
    });
    $(".tk_compPopUp2Menu").on("click",".tk_compPopUp2ItMinus",function () {
        var val = $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val();
        val--;
        if (val >= 0) {
            $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val(val);
        }else {
            $(this).parents(".tk_compPopUp2Item").remove();
        }
    });
    $(".tk_pMNAdd").click(function () {
        $(this).parents(".tk_pMNAddWrapper").siblings(".tk_compPopUp2Wrapper").removeClass("none");
    });

    $("#confirmMaterial").click(function () {
        /*var htmlContent = $(this).parents(".tk_compPopUp2BtnWrapper").siblings(".tk_compPopUp2Menu").children(".tk_compPopUp2Item").clone();*/
        /*$(this).parents(".tk_pMNMenuWrapper").children(".tk_pMNMenu").empty();*/
        /*for (var i=0,len=$(".tk_compPopUp2ItPMIpt").length;i<len;i++) {
            if($(".tk_compPopUp2ItPMIpt").val()>=1){

            }
        }*/
        var menu=$(this).parents(".tk_pMNMenuWrapper").children(".tk_pMNMenu");

        $(".tk_compPopUp2ItPMIpt").each(function () {
            if($(this).val()>=1){
                menu.append($(this).parents(".tk_compPopUp2Item"));
            }
        });
        /*$(this).parents(".tk_pMNMenuWrapper").children(".tk_pMNMenu").append($(this).parents(".tk_compPopUp2BtnWrapper").siblings(".tk_compPopUp2Menu").children(".tk_compPopUp2Item"));*/
    });
    $(".tk_pMNMenu").on("click",".tk_compPopUp2ItMinus",function () {
        var val = $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val();
        val--;
        if (val >= 1) {
            $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val(val);
        }else {
            var r = confirm("确认删除？");
            if (r == true) {
                $(this).parents(".tk_compPopUp2Item").remove();
            }
        }
    });
    $(".tk_pMNMenu").on("click",".tk_compPopUp2ItPlus",function () {
        var val = $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val();
        val++;
        $(this).siblings(".tk_compPopUp2ItPMIptWrapper").children(".tk_compPopUp2ItPMIpt").val(val);
    })
</script>
<script type="text/javascript" src="js/mobiscroll.js"></script>
<script type="text/javascript">
    /*时间日期选择器*/
    $(function () {
        var currYear = (new Date()).getFullYear();
        var opt = {};
        opt.date = {preset: 'date'};
        opt.datetime = {preset: 'datetime'};
        opt.time = {preset: 'time'};
        opt.default = {
            theme: 'android-ics light', //皮肤样式
            display: 'modal', //显示方式
            mode: 'scroller', //日期选择模式
            dateFormat: 'yyyy-mm-dd',
            lang: 'zh',
            showNow: true,
            nowText: "今天",
            startYear: currYear - 10, //开始年份
            endYear: currYear + 80 //结束年份
        };
        $(".a").mobiscroll($.extend(opt['date'], opt['default']));//年月日型
        var optDateTime = $.extend(opt['datetime'], opt['default']);
        var optTime = $.extend(opt['time'], opt['default']);

        $(".tk_compItemCTxtIpt").mobiscroll(optDateTime).datetime(optDateTime);//年月日时分型
        $("#EndTime").mobiscroll(optTime).time(optTime);//时分型

    });
</script>
<script>
    $(".tk_compItemC").click(function () {
        $(this).siblings(".tk_compPopUp2Wrapper").removeClass("none")
    });
    $(".tk_compPopUp2Btn:nth-child(1)").click(function () {
        var iptValue = $(this).parents(".tk_compPopUp2").find(".tk_compPopUp2ItIpt:checked").val();
        $(this).parents(".tk_pMLItem").find(".tk_compItemCTxt").text(iptValue).addClass("on");
        $(this).parents(".tk_compPopUp2Wrapper").addClass("none")
    });
    $(".tk_compPopUp2Btn:nth-child(2)").click(function () {
        $(this).parents(".tk_compPopUp2Wrapper").addClass("none")
    });
    $(".tk_compItCItem").click(function () {
        $(this).parents(".tk_compItCMenu").slideUp();
        $(this).parents(".tk_compItCMenu").siblings(".tk_compItemC").children(".tk_compItemCTxt").text($(this).text()).addClass("on");
        $(this).parents(".tk_compItCMenu").siblings(".tk_compItemC").children(".tk_pMDItemDIptD").val($(this).text());
    });
    $(".tk_compCTxa").focus(function () {
        $(".tk_compCTxa").siblings(".tk_compCNum").addClass("none")
    });
    $(".tk_pMDItemDIptD").change(function () {
        console.log($(this).val());
        $(this).siblings(".tk_compItemCTxt").addClass("on");
        $(this).siblings(".tk_compItemCTxt").text($(this).val());
    })
    /*点击camera按钮*/
    var input = document.querySelector('.tk_RTopPicItIptInput');
    var preview = document.querySelector('.tk_RTopPicMenu');
    var tk_RTopPicItIpt = document.querySelector('.tk_RTopPicItIpt');

    input.addEventListener('change', updateImageDisplay);

    function updateImageDisplay() {
        var curFiles = input.files;
        if (curFiles.length === 0) {
            var para = document.createElement('li');
            para.classList.add("tk_compPicItMsg");
            para.textContent = 'No files currently selected for upload';
            preview.appendChild(para);

        } else {
            for (var i = 0; i < curFiles.length; i++) {
                var listItemDelete = document.createElement('div');
                listItemDelete.classList.add("tk_RTopPicItDelete");
                var listItem = document.createElement('li');
                listItem.classList.add("tk_RTopPicItem");
                var para = document.createElement('p');
                if (validFileType(curFiles[i])) {
                    /*para.textContent = 'File name ' + curFiles[i].name + ', file size ' + returnFileSize(curFiles[i].size) + '.';*/
                    /*var image = document.createElement('img');*/
                    listItem.style.backgroundImage = "url(" + window.URL.createObjectURL(curFiles[i]) + ")";

                } else {
                    para.textContent = 'File name ' + curFiles[i].name + ': Not a valid file type. Update your selection.';
                    listItem.appendChild(para);
                }
                listItem.appendChild(listItemDelete);
                preview.insertBefore(listItem, tk_RTopPicItIpt);
            }
        }
    };
    var fileTypes = [
        'image/jpeg',
        'image/pjpeg',
        'image/png'
    ];

    function validFileType(file) {
        for (var i = 0; i < fileTypes.length; i++) {
            if (file.type === fileTypes[i]) {
                return true;
            }
        }
        return false;
    };
    /*删除图片*/
    $(".tk_RTopPicMenu").on("click", ".tk_RTopPicItDelete", function () {
        $(this).parents(".tk_RTopPicItem").remove()
    })

</script>
</body>
</html>